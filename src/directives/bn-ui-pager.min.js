(function(){"use strict";
/*!
   * Renders pagination
   * 
   * @param {object} ng-model - {recordCount, pageSize, currentPage}
   * @param {function} on-page - function(currentPage) { //TODO; }
   *
   */
angular.module("bnUi",[]).directive("bnUiPager",function(){return{restrict:"EA",template:'<div class="bn-ui-pager" ng-show="model.recordCount > 0">\n    <div class="summary" ng-show="showSummary">\n        <span ng-bind="(model.currentPage - 1) * model.pageSize + 1"><\/span> \n        - <span ng-bind="model.currentPage * model.pageSize > model.recordCount ? model.recordCount : model.currentPage * model.pageSize"><\/span> \n        / <span ng-bind="model.recordCount"><\/span>\n    <\/div>\n    <nav aria-label="Page navigation">\n      <ul class="pagination" ng-show="model.PageCount > 1">\n        <li ng-class="{disabled: model.currentPage == 1}">\n          <a href="#" aria-label="Previous" ng-click="page(model.currentPage-1)">\n            <span aria-hidden="true">&laquo;<\/span>\n          <\/a>\n        <\/li>\n        <li ng-repeat="p in model.DisplayPageNumbers track by $index" ng-class="{active: model.currentPage == p, disabled: p < 0}">\n          <a href="#" ng-show="p > 0" ng-click="page(p)"><span ng-bind="p"><\/span><\/a>\n          <a href="#" ng-show="p < 0">...<\/a>\n        <\/li>\n        <li ng-class="{disabled: model.currentPage == model.PageCount}">\n          <a href="#" aria-label="Next" ng-click="page(model.currentPage+1)">\n            <span aria-hidden="true">&raquo;<\/span>\n          <\/a>\n        <\/li>\n      <\/ul>\n    <\/nav>\n<\/div>',replace:!0,scope:{model:"=ngModel",onPage:"=onPage"},link:function(n,t,i){n.showSummary=typeof i.showSummary!="undefined"?i.showSummary==="true":!0;typeof n.model.PageCount=="undefined"&&(n.model.PageCount=Math.ceil(n.model.recordCount/n.model.pageSize));n.computePageNumbers=function(){var t,i,y,r,a,ut,ft,u,v,f,e,o,p,s,h,w,b,c,k,d,l,g,nt,tt,it,rt;if(n.needComputePageNumber||typeof n.model.DisplayPageNumbers=="undefined"){if(n.model.DisplayPageNumbers=[],n.needComputePageNumber=!0,n.model.PageCount<=10){for(nt=[],t=i=1,o=n.model.PageCount;1<=o?i<=o:i>=o;t=1<=o?++i:--i)nt.push(n.model.DisplayPageNumbers.push(t));return nt}if(n.model.currentPage<=5){for(t=y=1;y<=7;t=++y)n.model.DisplayPageNumbers.push(t);for(n.model.DisplayPageNumbers.push(-1),tt=[],t=r=p=n.model.PageCount-1,h=n.model.PageCount;p<=h?r<=h:r>=h;t=p<=h?++r:--r)tt.push(n.model.DisplayPageNumbers.push(t));return tt}if(n.model.currentPage>n.model.PageCount-5){for(w=[1,2],a=0,ut=w.length;a<ut;a++)t=w[a],n.model.DisplayPageNumbers.push(t);for(n.model.DisplayPageNumbers.push(-1),it=[],t=u=b=n.model.PageCount-6,c=n.model.PageCount;b<=c?u<=c:u>=c;t=b<=c?++u:--u)it.push(n.model.DisplayPageNumbers.push(t));return it}for(k=[1,2],v=0,ft=k.length;v<ft;v++)t=k[v],n.model.DisplayPageNumbers.push(t);for(n.model.DisplayPageNumbers.push(-1),t=f=d=n.model.currentPage-2,l=n.model.currentPage+2;d<=l?f<=l:f>=l;t=d<=l?++f:--f)n.model.DisplayPageNumbers.push(t);for(n.model.DisplayPageNumbers.push(-1),rt=[],t=e=g=n.model.PageCount-1,s=n.model.PageCount;g<=s?e<=s:e>=s;t=g<=s?++e:--e)rt.push(n.model.DisplayPageNumbers.push(t));return rt}};n.page=function(t){if(t<=0&&(t=1),console.debug(n.model.PageCount),t>n.model.PageCount&&(t=n.model.PageCount),n.model.currentPage!==t){n.onPage(t);return n.model.currentPage=t,n.computePageNumbers()}};n.$on("onModelChanged",function(){return n.computePageNumbers()});n.computePageNumbers()}}})}).call(this);